###deimos_expertmode
block elixir {
    # at this point the user should be in Celestia/CL_Z12_Test_of_the_Spheres/StarRoom
        if except p1 windowvisible ['WorldView', 'windowHUD', 'wndElixirContainer', 'sprtElixir1'] {
        print Elixir already acquired, skipping
    } else {
        # Elixir for everyone but p1
        # GRAB ELIXIR
        print GRABBING ELIXIR
        until except p1 windowvisible ['WorldView', 'windowHUD', 'wndElixirContainer', 'sprtElixir1'] {
            until except p1 hasxyz XYZ(-424.8884582519531, -3270.589111328125, -9.1552734375e-05) {
                except p1 tp XYZ(-424.8884582519531, -3270.589111328125, -9.1552734375e-05)
            }
            until except p1 windowvisible ['WorldView', 'NPCRangeWin', 'imgBackground'] {
                sleep 0.1
            }
            while except p1 windowvisible ['WorldView', 'NPCRangeWin', 'imgBackground'] {
                except p1 sendkey X, 0.1
            }
            until except p1 windowvisible ['WorldView', 'NPCServicesWin', 'ControlSprite', 'optionsLayout', 'NPCServicesOptionWindow', 'OptionButton'] {
                sleep 0.1
            }
            while except p1 windowvisible ['WorldView', 'NPCServicesWin', 'ControlSprite', 'optionsLayout', 'NPCServicesOptionWindow', 'OptionButton'] {
                except p1 clickwindow ['WorldView', 'NPCServicesWin', 'ControlSprite', 'optionsLayout', 'NPCServicesOptionWindow', 'OptionButton']
            }
        }
        times 5 {
            except p1 clickwindow ['WorldView', 'NPCServicesWin', 'wndDialogMain', 'Exit']
        }
    }
}

call elixir
exit
